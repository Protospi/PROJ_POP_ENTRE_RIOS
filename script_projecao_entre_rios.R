
# --------------------------------------------------------------------------------------------------------------------

# Script Projeção Demográfica 3 Rios

# --------------------------------------------------------------------------------------------------------------------

# Carrega Pacotes
library(tidyverse)

# --------------------------------------------------------------------------------------------------------------------

# Leitura dos dados da populacao
populacao <- read_csv("dados/populacao_entre_rios_idade_sexo_area_1970_2010.csv")

# Leitura dos dados de nascimentos
nascimentos <- read_csv("dados/nascimentos_entre_rios_sexo_2003_2019.csv")

# Leitura dos dados de obitos
obitos <- read_csv("dados/obitos_entre_rios_sexo_idade_2003_2019.csv")

# --------------------------------------------------------------------------------------------------------------------

# Limpeza de populacao

# --------------------------------------------------------------------------------------------------------------------

# Indices de 'a' ou 'de'
a_ou_de <- str_detect(populacao$idade, " a ")

# banco com idade_categorica
pop <- populacao %>% 
  filter(a_ou_de) 

# Recuper valores distintos ordem do fator
idade_cat <- pop %>% select(idade) %>%
  distinct() %>%
  mutate(idade = str_replace(idade, "anos", "")) %>% 
  mutate(idade = str_trim(idade)) %>%
  pull()

# Altera idades categorizadas
pop <- pop %>% 
  mutate(idade = str_replace(idade, "anos", "")) %>%
  mutate(idade = str_trim(idade),
         ano = as.factor(ano),
         idade = factor(idade))

# Reordena niveis
pop <- pop %>% 
  mutate(idade = fct_relevel(idade, idade_cat)) 

# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------



# --------------------------------------------------------------------------------------------------------------------

